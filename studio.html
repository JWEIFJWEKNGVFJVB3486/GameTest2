<!DOCTYPE html>
<html>
<head>
  <title>Studio - Edit Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #fafafa;
      user-select: none;
    }
    #toolbar {
      margin-bottom: 10px;
    }
    #canvas {
      position: relative;
      width: 100%;
      height: 600px;
      background: #ddd;
      border: 1px solid #aaa;
      overflow: hidden;
    }
    .shape {
      position: absolute;
      background: #3498db;
      border-radius: 4px;
      cursor: move;
      user-select: none;
    }
    .resizer {
      width: 15px;
      height: 15px;
      background: #2980b9;
      position: absolute;
      right: 0;
      bottom: 0;
      cursor: se-resize;
      border-radius: 50%;
    }
  </style>
</head>
<body>

<div id="toolbar">
  <button id="addSquareBtn">Add Square</button>
</div>

<div id="canvas"></div>

<script>
  const canvas = document.getElementById("canvas");
  const addSquareBtn = document.getElementById("addSquareBtn");

  addSquareBtn.addEventListener("click", () => {
    createShape(50, 50, 100, 100);
  });

  function createShape(x, y, width, height) {
    const shape = document.createElement("div");
    shape.classList.add("shape");
    shape.style.left = x + "px";
    shape.style.top = y + "px";
    shape.style.width = width + "px";
    shape.style.height = height + "px";

    // Make shape draggable
    makeDraggable(shape);

    // Add resizer handle
    const resizer = document.createElement("div");
    resizer.classList.add("resizer");
    shape.appendChild(resizer);

    makeResizable(shape, resizer);

    canvas.appendChild(shape);
  }

  function makeDraggable(element) {
    let isDragging = false;
    let startX, startY, origX, origY;

    element.addEventListener("mousedown", (e) => {
      if (e.target.classList.contains("resizer")) return; // Ignore dragging if resizing

      isDragging = true;
      startX = e.clientX;
      startY = e.clientY;
      origX = parseInt(element.style.left);
      origY = parseInt(element.style.top);
      document.body.style.userSelect = "none";
    });

    window.addEventListener("mousemove", (e) => {
      if (!isDragging) return;
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      element.style.left = origX + dx + "px";
      element.style.top = origY + dy + "px";
    });

    window.addEventListener("mouseup", () => {
      isDragging = false;
      document.body.style.userSelect = "";
    });
  }

  function makeResizable(element, resizer) {
    let isResizing = false;
    let startX, startY, startWidth, startHeight;

    resizer.addEventListener("mousedown", (e) => {
      e.stopPropagation(); // Prevent dragging
      isResizing = true;
      startX = e.clientX;
      startY = e.clientY;
      startWidth = parseInt(window.getComputedStyle(element).width, 10);
      startHeight = parseInt(window.getComputedStyle(element).height, 10);
      document.body.style.userSelect = "none";
    });

    window.addEventListener("mousemove", (e) => {
      if (!isResizing) return;
      const dx = e.clientX - startX;
      const dy = e.clientY - startY;
      element.style.width = (startWidth + dx) + "px";
      element.style.height = (startHeight + dy) + "px";
    });

    window.addEventListener("mouseup", () => {
      isResizing = false;
      document.body.style.userSelect = "";
    });
  }
</script>

</body>
</html>
