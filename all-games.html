<!DOCTYPE html>
<html>
<head>
  <title>All Games</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background: #eef5ff;
    }

    h1 {
      color: #333;
    }

    .game-item {
      background: #fff;
      padding: 10px;
      border-radius: 6px;
      margin-bottom: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }

    .play-btn {
      background: #007bff;
      color: white;
      margin-top: 10px;
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<h1>All Games</h1>
<div id="gamesContainer"></div>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
  import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCkjACpngpo9U96StM2Z1Y9Q7B3XtNSIQ0",
    authDomain: "gametest2-ba5fe.firebaseapp.com",
    projectId: "gametest2-ba5fe",
    storageBucket: "gametest2-ba5fe.appspot.com",
    messagingSenderId: "1063979387642",
    appId: "1:1063979387642:web:307e4621ae0394bcb49743",
    measurementId: "G-394Y1PYWV7"
  };

  const app = initializeApp(firebaseConfig);
  const firestore = getFirestore(app);

  const gamesContainer = document.getElementById("gamesContainer");

  async function loadAllGames() {
    const snapshot = await getDocs(collection(firestore, "games"));
    snapshot.forEach(docSnap => {
      const data = docSnap.data();
      const div = document.createElement("div");
      div.className = "game-item";
      div.innerHTML = `
        <strong>${data.name}</strong><br>
        <small>${data.description}</small><br>
        <button class="play-btn">Open</button>
      `;

      div.querySelector(".play-btn").addEventListener("click", () => {
        window.location.href = `studio.html?gameId=${docSnap.id}`;
      });

      gamesContainer.appendChild(div);
    });
  }

  loadAllGames();
</script>

</body>
</html>
